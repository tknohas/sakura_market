.container.mx-auto.px-4.mt-4
  %h1.text-3xl.font-bold.mb-4.text-center ポイント履歴
  %p.text-center.text-lg.font-bold.mb-4 ポイント残高: #{current_user.total_point}
  .grid
    .used-point.bg-white.shadow-md.rounded-lg.overflow-hidden
      %h2.text-xl.font-bold.p-4.bg-gray-200 使用ポイント
      .overflow-x-auto
        %table.w-full
          %thead.bg-gray-50
            %tr
              %th.px-6.py-3.text-left.text-xs.font-medium.text-gray-500.tracking-wider 購入商品
              %th.px-6.py-3.text-left.text-xs.font-medium.text-gray-500.tracking-wider 使用ポイント
              %th.px-6.py-3.text-left.text-xs.font-medium.text-gray-500.tracking-wider 使用日
          %tbody.bg-white.divide-y.divide-gray-200
            - current_user.purchases.order(created_at: :desc).each do |purchase|
              - if purchase.used_point
                %tr
                  %td.px-6.py-4.whitespace-nowrap
                    = link_to purchase.products.pluck(:name).join(' / '), purchase_path(purchase), class: 'text-blue-600 hover:text-blue-900'
                  %td.px-6.py-4.whitespace-nowrap= "#{purchase.used_point} ポイント"
                  %td.px-6.py-4.whitespace-nowrap= purchase.created_at.strftime('%Y年%m月%d日')

    .earn-point.bg-white.shadow-md.rounded-lg.overflow-hidden.mt-8
      %h2.text-xl.font-bold.p-4.bg-gray-200 取得ポイント
      .overflow-x-auto
        %table.w-full
          %thead.bg-gray-50
            %tr
              %th.px-6.py-3.text-left.text-xs.font-medium.text-gray-500.tracking-wider 取得ポイント
              %th.px-6.py-3.text-left.text-xs.font-medium.text-gray-500.tracking-wider 取得日
          %tbody.bg-white.divide-y.divide-gray-200
            - current_user.coupon_usages.order(created_at: :desc).each do |usage|
              %tr
                %td.px-6.py-4.whitespace-nowrap= "#{usage.coupon.point} ポイント"
                %td.px-6.py-4.whitespace-nowrap= usage.created_at.strftime('%Y年%m月%d日')
